(this["webpackJsonpmrdb-client"]=this["webpackJsonpmrdb-client"]||[]).push([[0],{113:function(e,t,n){},122:function(e,t,n){"use strict";n.r(t);var i=n(2),r=n(0),a=n(11),c=n.n(a),o=(n(113),n(53)),s=n(13),l=n.n(s),u=n(76),h=n(21),d=n(17),g=n(18),f=n(14),b=n(29),j=n(4),p=n(166),m=n(167),v=n(168),O=n(169),x=n(164),y=n(165),k=n(183),w=n(158),R=n(176),L=n(175),C=n(184),S=n(93),M=n(95),_=n(151),E=n(180),N=n(58),D=n.n(N),I=n(57),W=n.n(I),U=n(90),A=n.n(U),F=n(89),T=n.n(F),H=n(88),B=n.n(H),K=n(15),P=n(181),Y=n(91),X=n(170),z=n(171),J=n(179),G=n(172),Z=n(173),q=function(){function e(){var t=this;Object(d.a)(this,e),this._left=0,this._top=0,this._right=0,this._bottom=0,this.width=function(){return t.right-t.left},this.height=function(){return t.bottom-t.top}}return Object(g.a)(e,[{key:"validate",value:function(){var e=Math.min(this.left,this.right),t=Math.min(this.top,this.bottom),n=Math.max(this.left,this.right),i=Math.max(this.top,this.bottom);this.left=e,this.top=t,this.right=n,this.bottom=i}},{key:"toString",value:function(){return"left: ".concat(this.left,", top: ").concat(this.top,", right: ").concat(this.right,", bottom: ").concat(this.bottom)}},{key:"toPoints",value:function(){return[{x:this.left,y:this.top},{x:this.right,y:this.top},{x:this.right,y:this.bottom},{x:this.left,y:this.bottom}]}},{key:"deepCopy",value:function(){var t=new e;return t.left=this.left,t.top=this.top,t.right=this.right,t.bottom=this.bottom,t}},{key:"left",set:function(e){this._left=Math.min(Math.max(0,e),1)},get:function(){return Math.min(this._left,this._right)}},{key:"top",set:function(e){this._top=Math.min(Math.max(0,e),1)},get:function(){return Math.min(this._top,this._bottom)}},{key:"right",set:function(e){this._right=Math.min(Math.max(0,e),1)},get:function(){return Math.max(this._left,this._right)}},{key:"bottom",set:function(e){this._bottom=Math.min(Math.max(0,e),1)},get:function(){return Math.max(this._top,this._bottom)}},{key:"centerX",get:function(){return this.left+this.width()/2}},{key:"centerY",get:function(){return this.top+this.height()/2}}]),e}(),V=function(){function e(t,n,i,r){Object(d.a)(this,e),this.id=void 0,this.categoryId=void 0,this.label=void 0,this.rectangle=void 0,this.id=t,this.categoryId=n,this.label=i,this.rectangle=r}return Object(g.a)(e,[{key:"containsPoint",value:function(e,t){return!(e<this.rectangle.left)&&(!(t<this.rectangle.top)&&(!(e>this.rectangle.right)&&!(t>this.rectangle.bottom)))}},{key:"neighborScore",value:function(e,t){var n=Math.abs(this.rectangle.left-e),i=Math.abs(this.rectangle.right-e),r=Math.abs(this.rectangle.top-t),a=Math.abs(this.rectangle.bottom-t);return Math.min(n,r,i,a)}},{key:"deepCopy",value:function(){return new e(this.id,this.categoryId,this.label,this.rectangle.deepCopy())}}]),e}();function $(e){return e.map((function(e,t){return{category_id:e.categoryId,label:e.label,order:5*t,points:e.rectangle.toPoints()}}))}function Q(e){return e.map((function(e){var t=e.id?e.id:-1,n=e.category_id,i=e.label,r=e.points.map((function(e){return e.x})),a=function(e){return e.map((function(e){return e.y}))}(e.points),c=Math.min.apply(Math,Object(K.a)(r)),o=Math.min.apply(Math,Object(K.a)(a)),s=Math.max.apply(Math,Object(K.a)(r)),l=Math.max.apply(Math,Object(K.a)(a)),u=new q;return u.left=c,u.top=o,u.right=s,u.bottom=l,u.validate(),new V(t,n,i,u)}))}var ee=function(){function e(t,n,i){Object(d.a)(this,e),this._id=0,this._name="",this._order=0,this._id=t,this._name=n,this._order=i}return Object(g.a)(e,[{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"order",get:function(){return this._order}}]),e}(),te=function(){function e(t,n,i,r){Object(d.a)(this,e),this._categoryId=0,this._label=0,this._name="",this._order=0,this._categoryId=t,this._label=n,this._name=i,this._order=r}return Object(g.a)(e,[{key:"categoryId",get:function(){return this._categoryId}},{key:"label",get:function(){return this._label}},{key:"name",get:function(){return this._name}},{key:"order",get:function(){return this._order}}]),e}(),ne="https://mrdb.keiji.dev/api/v1",ie=function(e){if(e.ok)return e;switch(e.status){case 400:throw Error("INVALID_TOKEN");case 401:throw Error("UNAUTHORIZED");case 500:throw Error("INTERNAL_SERVER_ERROR");case 502:throw Error("BAD_GATEWAY");case 404:throw Error("No region data found.");default:throw Error("UNHANDLED_ERROR")}};function re(e){return ae.apply(this,arguments)}function ae(){return(ae=Object(h.a)(l.a.mark((function e(t){var n,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t),e.next=4,fetch(ne+"/hash",{method:"POST",body:n}).then(ie);case 4:return i=e.sent,e.abrupt("return",i.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(){return oe.apply(this,arguments)}function oe(){return(oe=Object(h.a)(l.a.mark((function e(){var t,n,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ne+"/category").then(ie);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,i=n.categories.map((function(e){var t=e.id,n=e.name,i=e.order;return new ee(t,n,i)})),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e){return le.apply(this,arguments)}function le(){return(le=Object(h.a)(l.a.mark((function e(t){var n,i,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ne+"/category/".concat(t)).then(ie);case 2:return n=e.sent,e.next=5,n.json();case 5:return i=e.sent,r=i.labels.map((function(e){var t=e.category_id,n=e.label,i=e.name,r=e.order;return new te(t,n,i,r)})),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e,t,n){var i=ne+"/page/"+e.dhash8;return t&&n?i+="/?category_id=".concat(t.id,"&published=true"):t?i+="/?category_id=".concat(t.id):n&&(i+="/?published=true"),i}function he(e,t){return de.apply(this,arguments)}function de(){return(de=Object(h.a)(l.a.mark((function e(t,n){var i,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ue(t,n,!1)).then(ie);case 2:return i=e.sent,e.next=5,i.json();case 5:return r=e.sent,a=Q(r.regions),console.log(a),e.abrupt("return",{hashes:t,regions:a});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(e){var t=ne+"/page";return e&&(t+="?category_id="+e.id),t}function fe(e,t,n,i){return be.apply(this,arguments)}function be(){return(be=Object(h.a)(l.a.mark((function e(t,n,i,r){var a,c,o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=$(i),c={image_ids:{dhash8:n.dhash8,dhash12:n.dhash12,dhash16:n.dhash16},regions:a},o=JSON.stringify(c),e.next=5,fetch(ge(r),{method:"POST",headers:{"Idempotency-Key":t},body:o});case 5:return s=e.sent,e.abrupt("return",s.json());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var je="#f44336",pe=["#4caf50","#2196f3","#ff9800","#ff5722","#5c6bc0","#ab47bc","#ec407a","#7e57c2","#26c6da","#26a69a"],me=.01,ve=.004,Oe=function(){function e(t,n){var i=this;Object(d.a)(this,e),this.category=new ee(0,"Unknown",0),this.label=0,this.mode="move",this.regionList=[],this.image=null,this.canvas=void 0,this.callback=new(function(){function e(){Object(d.a)(this,e)}return Object(g.a)(e,[{key:"onSelectedRegion",value:function(e){}},{key:"onAddedRegion",value:function(e,t){}},{key:"onDeletedRegion",value:function(e,t){}},{key:"onChangedLabel",value:function(e,t){}},{key:"onDeformRegion",value:function(e,t){}}]),e}()),this._focusedRegion=null,this._editingRegion=null,this._selectedRegion=null,this.imageWidth=0,this.imageHeight=0,this.marginTop=0,this.marginBottom=0,this.marginLeft=0,this.marginRight=0,this.clicking=!1,this.onMouseDownListener=function(e){i.clicking=!0;var t=i.calcXRatio(e.offsetX),n=i.calcYRatio(e.offsetY),r=i.nearestRegion(t,n);r&&(r.length>0?i.selectedRegion=r[0]:(i.selectedRegion=null,i.editingRegion=i.createRegion(t,n)),i.callback.onSelectedRegion(i.selectedRegion),i.redraw())},this.onMouseMoveListener=function(e){var t=i.calcXRatio(e.offsetX),n=i.calcYRatio(e.offsetY);if(i.clicking&&null!==i.editingRegion)return i.editingRegion.rectangle.right=t,i.editingRegion.rectangle.bottom=n,void i.redraw();if(!i.clicking){var r=i.nearestRegion(t,n);if(!r)return;return r.length>0?i.focusedRegion=r[0]:i.focusedRegion=null,void i.redraw()}},this.onMouseUpListener=function(e){i.clicking=!1;var t=i.editingRegion;if(t){if(t.rectangle.validate(),i.editingRegion=null,t.rectangle.width()<me&&t.rectangle.height()<me)return;i.addRegion(t)}},this.onKeyDownListener=function(e){if("ArrowRight"===e.key||"ArrowLeft"===e.key||"ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();var t=me*(e.shiftKey?.1:1);e.altKey?i.shrink(e.key,t):e.metaKey?i.expand(e.key,t):i.move(e.key,t)}else if("Delete"===e.key||"Clear"===e.key||"Backspace"===e.key||"d"===e.key){if(e.preventDefault(),!i.selectedRegion)return;i.deleteRegion(i.selectedRegion)}else if(isNaN(parseInt(e.key)))"Escape"===e.key?(e.preventDefault(),i.editingRegion=null):"Enter"===e.key?(e.preventDefault(),e.shiftKey?i.selectPrevRegion():i.selectNextRegion()):"Meta"===e.key?(e.preventDefault(),i.mode="expand"):"Alt"===e.key?(e.preventDefault(),i.mode="shrink"):console.log(e.key);else{if(e.preventDefault(),!i.selectedRegion)return;i.changeRegionLabel(i.selectedRegion,parseInt(e.key))}i.redraw()},this.onKeyUpListener=function(e){e.preventDefault(),("Meta"!==e.key||e.altKey)&&("Alt"!==e.key||e.metaKey)||(i.mode="move"),i.redraw()},this.canvas=t,this.callback=n}return Object(g.a)(e,[{key:"destroy",value:function(){this.image=null}},{key:"calcMargin",value:function(e){if(this.image){var t=Math.min(this.canvas.width/this.image.width,this.canvas.height/this.image.height),n=this.canvas.width-this.image.width*t,i=this.canvas.height-this.image.height*t;n<2*e&&(n=2*e),i<2*e&&(i=2*e),this.marginTop=i/2,this.marginBottom=i-this.marginTop,this.marginLeft=n/2,this.marginRight=n-this.marginLeft,this.imageWidth=this.canvas.width-n,this.imageHeight=this.canvas.height-i}}},{key:"calcXRatio",value:function(e){return(e-this.marginLeft)/this.imageWidth}},{key:"calcYRatio",value:function(e){return(e-this.marginTop)/this.imageHeight}},{key:"nearestRegion",value:function(e,t){return this.regionList?this.regionList.filter((function(n){return n.containsPoint(e,t)})).filter((function(n){return n.neighborScore(e,t)<.005})).sort((function(n,i){var r=n.neighborScore(e,t),a=i.neighborScore(e,t);return r<a?-1:r>a?1:0})):null}},{key:"addRegion",value:function(e){var t=this.regionList?this.regionList:[];this.regionList=[].concat(Object(K.a)(t),[e]),this.callback.onAddedRegion(e,this.regionList),this.selectedRegion=e,this.callback.onSelectedRegion(e)}},{key:"deleteRegion",value:function(e){if(this.regionList){var t=this.regionList.indexOf(e);t>=0&&(this.regionList=[].concat(Object(K.a)(this.regionList.slice(0,t)),Object(K.a)(this.regionList.slice(t+1,this.regionList.length)))),this.callback.onDeletedRegion(e,this.regionList),this.selectedRegion=null,this.callback.onSelectedRegion(null)}}},{key:"moveRegion",value:function(e){if(this.regionList&&0!==this.regionList.length)if(null!==this.selectedRegion){var t=this.regionList.indexOf(this.selectedRegion);if(t>-1){var n=t+e;n>=0&&n<this.regionList.length&&(this.selectedRegion=this.regionList[n],this.callback.onSelectedRegion(this.selectedRegion))}}else this.selectedRegion=this.regionList[0]}},{key:"selectPrevRegion",value:function(){this.moveRegion(-1)}},{key:"selectNextRegion",value:function(){this.moveRegion(1)}},{key:"focusedRegion",set:function(e){this._focusedRegion=e},get:function(){return this._focusedRegion}},{key:"editingRegion",set:function(e){this._editingRegion=e},get:function(){return this._editingRegion}},{key:"selectedRegion",set:function(e){this._selectedRegion=e},get:function(){return this._selectedRegion}}]),Object(g.a)(e,[{key:"createRegion",value:function(e,t){var n=new q;n.left=e,n.right=e,n.top=t,n.bottom=t;var i=this.category?this.category.id:0;return new V(-1,i,this.label,n)}},{key:"shrink",value:function(e,t){return this.mode="shrink",e.endsWith("Left")?this.deform(0,0,-t,0):e.endsWith("Up")?this.deform(0,0,0,-t):e.endsWith("Right")?this.deform(t,0,0,0):!!e.endsWith("Down")&&this.deform(0,t,0,0)}},{key:"expand",value:function(e,t){return this.mode="expand",e.endsWith("Left")?this.deform(-t,0,0,0):e.endsWith("Up")?this.deform(0,-t,0,0):e.endsWith("Right")?this.deform(0,0,t,0):!!e.endsWith("Down")&&this.deform(0,0,0,t)}},{key:"move",value:function(e,t){return this.mode="move",e.endsWith("Left")?this.deform(-t,0,-t,0):e.endsWith("Up")?this.deform(0,-t,0,-t):e.endsWith("Right")?this.deform(t,0,t,0):!!e.endsWith("Down")&&this.deform(0,t,0,t)}},{key:"deform",value:function(e,t,n,i){if(!this.regionList||!this.selectedRegion)return!1;var r=this.regionList.indexOf(this.selectedRegion);if(r<0)return!1;var a=this.selectedRegion.deepCopy(),c=a.rectangle,o=c.left+e,s=c.top+t,l=c.right+n,u=c.bottom+i;if(o=Math.max(0,o),s=Math.max(0,s),l=Math.min(1,l),u=Math.min(1,u),c.left===o&&c.top===s&&c.right===l&&c.bottom===u)return!1;c.left=o,c.top=s,c.right=l,c.bottom=u;var h=[].concat(Object(K.a)(this.regionList.slice(0,r)),[a],Object(K.a)(this.regionList.slice(r+1,this.regionList.length)));return this.regionList=h,this.selectedRegion=a,this.callback.onDeformRegion(a,this.regionList),this.callback.onSelectedRegion(this.selectedRegion),!0}},{key:"changeRegionLabel",value:function(e,t){if(this.label=t,!this.regionList)return!1;var n=this.regionList.indexOf(e);if(n<0)return!1;var i=e.deepCopy();i.label=t;var r=[].concat(Object(K.a)(this.regionList.slice(0,n)),[i],Object(K.a)(this.regionList.slice(n+1,this.regionList.length)));return this.regionList=r,this.selectedRegion=i,this.callback.onChangedLabel(i,this.regionList),this.callback.onSelectedRegion(this.selectedRegion),!0}},{key:"redraw",value:function(){var e=this,t=this.canvas.getContext("2d");null!==t&&(t.clearRect(0,0,this.canvas.width,this.canvas.height),this.image&&(t.drawImage(this.image,this.marginLeft,this.marginTop,this.imageWidth,this.imageHeight),this.regionList&&(this.regionList.forEach((function(n,i){if(n===e.focusedRegion?t.strokeStyle="".concat(pe[n.label]):t.strokeStyle="".concat(pe[n.label]).concat("aa"),e.drawRegion(n,t),n===e.selectedRegion){t.fillStyle="".concat(je),t.strokeStyle="".concat(je);var r=n.deepCopy();r.rectangle.left-=ve,r.rectangle.top-=ve,r.rectangle.right+=ve,r.rectangle.bottom+=ve,e.drawRegion(r,t),e.drawMarkers(r,t)}})),this.editingRegion&&(t.strokeStyle="".concat("#f44336"),this.drawRegion(this.editingRegion,t)))))}},{key:"drawExpandMarkers",value:function(e,t){var n=e.rectangle.centerX*this.imageWidth+this.marginLeft,i=e.rectangle.top*this.imageHeight+this.marginTop;t.fillRect(n,i,1,-8);var r=e.rectangle.left*this.imageWidth+this.marginLeft,a=e.rectangle.centerY*this.imageHeight+this.marginTop;t.fillRect(r,a,-8,1);var c=e.rectangle.right*this.imageWidth+this.marginLeft,o=e.rectangle.centerY*this.imageHeight+this.marginTop;t.fillRect(c,o,8,1);var s=e.rectangle.centerX*this.imageWidth+this.marginLeft,l=e.rectangle.bottom*this.imageHeight+this.marginTop;t.fillRect(s,l,1,8)}},{key:"drawShrinkMarkers",value:function(e,t){var n=e.rectangle.centerX*this.imageWidth+this.marginLeft,i=e.rectangle.top*this.imageHeight+this.marginTop;t.fillRect(n,i,1,8);var r=e.rectangle.left*this.imageWidth+this.marginLeft,a=e.rectangle.centerY*this.imageHeight+this.marginTop;t.fillRect(r,a,8,1);var c=e.rectangle.right*this.imageWidth+this.marginLeft,o=e.rectangle.centerY*this.imageHeight+this.marginTop;t.fillRect(c,o,-8,1);var s=e.rectangle.centerX*this.imageWidth+this.marginLeft,l=e.rectangle.bottom*this.imageHeight+this.marginTop;t.fillRect(s,l,1,-8)}},{key:"drawMarkers",value:function(e,t){switch(this.mode){case"move":return;case"expand":return void this.drawExpandMarkers(e,t);case"shrink":return void this.drawShrinkMarkers(e,t)}}},{key:"drawRegion",value:function(e,t){var n=e.rectangle;t.strokeRect(n.left*this.imageWidth+this.marginLeft,n.top*this.imageHeight+this.marginTop,n.width()*this.imageWidth,n.height()*this.imageHeight)}}]),e}();var xe=Object(_.a)((function(e){return Object(E.a)({root:{height:"100%",backgroundColor:e.palette.background.paper},canvasContainer:{position:"relative",height:"100%",width:"100%"},canvas:{cursor:"crosshair"}})}));function ye(e){var t=xe(),n=Object(r.useState)(null),a=Object(f.a)(n,2),c=a[0],o=a[1],s=Object(r.useRef)(null),l=Object(r.useRef)(null),u=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e=function(e){u.current&&l.current&&c&&s.current&&(u.current.width=l.current.clientWidth,u.current.height=l.current.clientHeight,s.current.calcMargin(16),s.current.redraw())};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}})),Object(r.useEffect)((function(){var t=u.current;if(t){var n=new Oe(t,e.callback);t.addEventListener("mousedown",n.onMouseDownListener),t.addEventListener("mousemove",n.onMouseMoveListener),t.addEventListener("mouseup",n.onMouseUpListener),document.addEventListener("keydown",n.onKeyDownListener),document.addEventListener("keyup",n.onKeyUpListener),s.current=n}return function(){if(t&&s.current){var e=s.current;t.removeEventListener("mousedown",e.onMouseDownListener),t.removeEventListener("mousemove",e.onMouseMoveListener),t.removeEventListener("mouseup",e.onMouseUpListener)}if(s.current){var n=s.current;document.removeEventListener("keydown",n.onKeyDownListener),document.removeEventListener("keyup",n.onKeyUpListener)}}}),[u]),Object(r.useEffect)((function(){e.file?function(e,t){var n=new FileReader;n.onload=function(e){var n,i=null===(n=e.target)||void 0===n?void 0:n.result;if(null!=i){var r=new Image;r.src=i,t(r)}},n.readAsDataURL(e)}(e.file,(function(e){o(e)})):o(null)}),[e.file]),Object(r.useEffect)((function(){s.current&&(s.current.image=c,s.current.calcMargin(16),s.current.category=e.selectedCategory,s.current.label=0,s.current.regionList=e.regionList,s.current.redraw())}),[c,e.regionList,e.selectedCategory]),Object(r.useEffect)((function(){u.current&&l.current&&(u.current.width=l.current.clientWidth,u.current.height=l.current.clientHeight,s.current&&s.current.redraw())}),[u,l]),Object(r.useEffect)((function(){s.current&&(s.current.selectedRegion=e.selectedRegion,s.current.redraw())}),[e.selectedRegion]),Object(r.useEffect)((function(){e.selectedCategory&&s.current&&(s.current.category=e.selectedCategory)}),[e.selectedCategory]),Object(i.jsx)("div",{className:t.canvasContainer,ref:l,children:Object(i.jsx)("canvas",{className:t.canvas,tabIndex:-1,ref:u})})}var ke=n(157),we=n(159),Re=n(160),Le=n(161),Ce=n(162),Se=n(163),Me=n(154),_e=n(182),Ee=n(177),Ne=Object(_.a)((function(e){return Object(E.a)({root:{overflowY:"scroll",backgroundColor:e.palette.background.paper},formControl:{margin:e.spacing(1),minWidth:"120px"},selectEmpty:{marginTop:e.spacing(2)}})}));function De(e){var t=Ne(),n=Object(r.useRef)(null),a=function(){var t=Object(h.a)(l.a.mark((function t(n){var i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,se(n.id);case 2:i=t.sent,e.callback.onLabelsUpdated(i);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=function(){var t=Object(h.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ce();case 2:n=t.sent,e.callback.onCategoriesUpdated(n),e.callback.onCategorySelected(n[0]),a(n[0]);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){c()}),[n]);return Object(i.jsx)("div",{className:t.root,children:Object(i.jsxs)(Me.a,{className:t.formControl,children:[Object(i.jsx)(_e.a,{id:"demo-simple-select-label",children:"Category"}),Object(i.jsx)(Ee.a,{value:e.selectedCategory?e.selectedCategory.id:0,onChange:function(t){var n=t.target.value;if("number"===typeof n&&e.categoryList){var i=e.categoryList.filter((function(e){return e.id===n}));i&&(e.callback.onCategorySelected(i[0]),a(i[0]))}},className:t.selectEmpty,children:e.categoryList?e.categoryList.map((function(e,t){return Object(i.jsx)(P.a,{value:e.id,children:e.name})})):Object(i.jsx)("div",{})})]})})}var Ie=n(81),We=n.n(Ie),Ue=n(80),Ae=n.n(Ue),Fe=Object(_.a)((function(e){return Object(E.a)({root:{height:"100%",overflowY:"scroll",backgroundColor:e.palette.background.paper},table:{minWidth:"100%"},labelIndicator:{display:"inline-block",width:"16px",height:"16px",marginRight:"4px"}})}));function Te(e){var t=Fe();if(!e.regionList)return Object(i.jsx)(R.a,{className:t.root});var n=function(e,t,n){var i=Object(K.a)(e),r=i[n];return i[n]=i[t],i[t]=r,i},r=function(t){if(e.regionList){var i=t+1,r=n(e.regionList,t,i);e.callback.onChangeRegionList(r)}},a=function(t){if(e.regionList){var i=t-1,r=n(e.regionList,t,i);e.callback.onChangeRegionList(r)}},c=function(t){if(e.regionList)return 0===t?Object(i.jsx)(ke.a,{children:Object(i.jsx)(w.a,{onClick:function(){r(t)},children:Object(i.jsx)(W.a,{})})}):t===e.regionList.length-1?Object(i.jsx)(ke.a,{children:Object(i.jsx)(w.a,{onClick:function(){a(t)},children:Object(i.jsx)(D.a,{})})}):Object(i.jsxs)(ke.a,{children:[Object(i.jsx)(w.a,{onClick:function(){a(t)},children:Object(i.jsx)(D.a,{})}),Object(i.jsx)(w.a,{onClick:function(){r(t)},children:Object(i.jsx)(W.a,{})})]})},o=function(t){return e.selectedRegion===t?Object(i.jsx)(ke.a,{children:Object(i.jsx)(Ae.a,{})}):Object(i.jsx)(ke.a,{children:Object(i.jsx)(We.a,{})})},s=function(n){if(!e.labelList)return Object(i.jsx)(ke.a,{children:n});var r,a=e.labelList.filter((function(e){return e.label===n}))[0];r=a?a.name:"Unknown";var c="".concat(n,": ").concat(r);return Object(i.jsxs)(ke.a,{children:[Object(i.jsx)("span",{className:t.labelIndicator,style:{background:pe[n]}}),c]})};return Object(i.jsxs)(R.a,{className:t.root,children:[Object(i.jsx)(De,{categoryList:e.categoryList,selectedCategory:e.selectedCategory,callback:e.categorySettingCallback}),e.regionList&&0!==e.regionList.length?Object(i.jsx)(we.a,{component:S.a,children:Object(i.jsxs)(Re.a,{className:t.table,"aria-label":"simple table",children:[Object(i.jsx)(Le.a,{children:Object(i.jsxs)(Ce.a,{children:[Object(i.jsx)(ke.a,{}),Object(i.jsx)(ke.a,{children:"Label"}),Object(i.jsx)(ke.a,{align:"center",children:"Order"})]})}),Object(i.jsx)(Se.a,{children:e.regionList.map((function(t,n){return Object(i.jsxs)(Ce.a,{onClick:function(){!function(t){e.callback.onRegionSelected(t)}(t)},children:[o(t),s(t.label),c(n)]},n)}))})]})}):Object(i.jsx)("span",{})]})}var He=n(83),Be=n.n(He),Ke=n(85),Pe=n.n(Ke),Ye=n(84),Xe=n.n(Ye),ze=n(86),Je=n.n(ze),Ge=n(178),Ze=function e(t,n){Object(d.a)(this,e),this.selectedRegion=void 0,this.regionList=void 0,this.selectedRegion=t,this.regionList=n},qe=Object(_.a)((function(e){return Object(E.a)({root:{width:"100%",height:"100%",backgroundColor:e.palette.background.paper,display:"flex"},grid:{top:"64px",height:"calc(100% - 64px)"},regionEditor:{height:"100%",backgroundColor:e.palette.background.paper,display:"flex"},regionList:{height:"100%",backgroundColor:e.palette.background.paper,display:"flex"},title:{flexGrow:1},menu:{}})}));function Ve(e){var t=Object(r.useState)(e),n=Object(f.a)(t,2),i=n[0],a=n[1],c=Object(r.useRef)(i);return Object(r.useEffect)((function(){c.current=i}),[i]),[i,a,c]}function $e(e){var t=qe(),n=Object(r.useRef)(Object(Ge.a)()),a=Object(r.useState)(null),c=Object(f.a)(a,2),o=c[0],s=c[1],u=Object(r.useState)(),j=Object(f.a)(u,2),R=j[0],L=j[1],C=Object(r.useState)(!1),S=Object(f.a)(C,2),_=S[0],E=S[1],N=Object(r.useState)(!1),D=Object(f.a)(N,2),I=D[0],W=D[1],U=Object(r.useState)(null),A=Object(f.a)(U,2),F=A[0],T=A[1],H=Object(r.useRef)(null),B=Object(r.useState)(),q=Object(f.a)(B,2),V=q[0],ee=q[1],te=Object(r.useState)(),ne=Object(f.a)(te,2),ie=ne[0],ae=ne[1],ce=Object(r.useState)(),oe=Object(f.a)(ce,2),se=oe[0],le=oe[1],ue=Object(r.useState)(),de=Object(f.a)(ue,2),ge=de[0],be=de[1],je=Ve(null),pe=Object(f.a)(je,3),me=pe[0],ve=pe[1],Oe=pe[2],xe=Ve(new Array),ke=Object(f.a)(xe,3),we=ke[0],Re=ke[1],Le=ke[2],Ce=Ve(new Array),Se=Object(f.a)(Ce,3),Me=Se[0],_e=Se[1],Ee=Se[2],Ne=Object(r.useState)("Hello"),De=Object(f.a)(Ne,2),Ie=De[0],We=De[1],Ue=Object(r.useState)({open:!1,vertical:"top",horizontal:"center"}),Ae=Object(f.a)(Ue,2),Fe=Ae[0],He=Ae[1],Ke=Fe.vertical,Ye=Fe.horizontal,ze=Fe.open,$e=new(function(){function e(){Object(d.a)(this,e)}return Object(g.a)(e,[{key:"onSelectedRegion",value:function(e){ve(e)}},{key:"onAddedRegion",value:function(e,t){at(Oe.current,Le.current),Re(t)}},{key:"onDeletedRegion",value:function(e,t){at(Oe.current,Le.current),Re(t)}},{key:"onChangedLabel",value:function(e,t){at(Oe.current,Le.current),Re(t)}},{key:"onDeformRegion",value:function(e,t){at(Oe.current,Le.current),Re(t)}}]),e}()),Qe=new(function(){function e(){Object(d.a)(this,e)}return Object(g.a)(e,[{key:"onChangeRegionList",value:function(e){at(Oe.current,Le.current),Re(e)}},{key:"onCategoriesUpdated",value:function(e){var t=Object(K.a)(e);ae(t)}},{key:"onRegionSelected",value:function(e){ve(e)}}]),e}()),et=new(function(){function e(){Object(d.a)(this,e)}return Object(g.a)(e,[{key:"onCategoriesUpdated",value:function(e){var t=Object(K.a)(e);ae(t)}},{key:"onCategorySelected",value:function(e){le(e)}},{key:"onLabelsUpdated",value:function(e){be(e)}}]),e}()),tt=function(e){switch(e.message){case"Failed to fetch":We("A network error has occurred."),He(Object(b.a)(Object(b.a)({},Fe),{},{open:!0}));break;default:We("".concat(e.message)),He(Object(b.a)(Object(b.a)({},Fe),{},{open:!0}))}},nt=function(){var t=Object(h.a)(l.a.mark((function t(){var n,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.selectedFile){t.next=2;break}return t.abrupt("return");case 2:if(Re(new Array),e.onlineMode){t.next=5;break}return t.abrupt("return");case 5:return t.prev=5,t.next=8,re(e.selectedFile);case 8:return n=t.sent,ee(n),t.next=12,he(n,se);case 12:i=t.sent,n===i.hashes&&Re(i.regions),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(5),tt(t.t0);case 19:case"end":return t.stop()}}),t,null,[[5,16]])})));return function(){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){var e=function(e){e.preventDefault(),"z"===e.key&&(e.ctrlKey||e.metaKey)&&rt()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}})),Object(r.useEffect)((function(){if(!e.selectedFile)return E(!1),ee({}),Re([]),_e([]),void s(e.selectedFile);_?W(!0):s(e.selectedFile)}),[e.selectedFile]),Object(r.useEffect)((function(){se&&(_?W(!0):L(se))}),[se]),Object(r.useEffect)((function(){nt()}),[e.onlineMode]),Object(r.useEffect)((function(){n.current=Object(Ge.a)(),it(),o&&nt()}),[o,R]),Object(r.useEffect)((function(){var e=Me.length>0;E(e)}),[Me]);var it=function(){_e([])},rt=function(){if(0!==Me.length){var e=Me.length-1,t=Me[e];Re(t.regionList),ve(t.selectedRegion);var n=Object(K.a)(Me.slice(0,e));_e(n)}},at=function(e,t){var n=[].concat(Object(K.a)(Ee.current),[new Ze(e,t)]);_e(n)},ct=function(){var t=Object(h.a)(l.a.mark((function t(){var i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.selectedFile){t.next=2;break}return t.abrupt("return");case 2:if(we){t.next=4;break}return t.abrupt("return");case 4:if(t.prev=4,V){t.next=10;break}return t.next=8,re(e.selectedFile);case 8:i=t.sent,ee(i);case 10:if(V){t.next=12;break}return t.abrupt("return");case 12:return t.next=14,fe(n.current,V,we,se);case 14:We("Save completed."),He(Object(b.a)(Object(b.a)({},Fe),{},{open:!0})),E(!1),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(4),tt(t.t0);case 22:case"end":return t.stop()}}),t,null,[[4,19]])})));return function(){return t.apply(this,arguments)}}(),ot=function(){var t=Object(h.a)(l.a.mark((function t(){var n,i,r,a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.selectedFile){t.next=2;break}return t.abrupt("return");case 2:if(we){t.next=4;break}return t.abrupt("return");case 4:n=$(we),i={file:e.selectedFile.name,regions:n},V&&(i.image_ids={dhash8:V.dhash8,dhash12:V.dhash12,dhash16:V.dhash16}),r=new Blob([JSON.stringify(i,null,"  ")],{type:"application/json"}),a=URL.createObjectURL(r),c=document.createElement("a"),document.body.appendChild(c),c.download=e.selectedFile.name+".json",c.href=a,c.click(),c.remove(),URL.revokeObjectURL(a);case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(i.jsxs)(r.Fragment,{children:[Object(i.jsx)(X.a,{position:"static",children:Object(i.jsxs)(z.a,{children:[Object(i.jsx)(M.a,{variant:"h6",className:t.title,children:e.selectedFile?e.selectedFile.name:"MRDB - Manga Region Database"}),Object(i.jsxs)("div",{className:t.menu,children:[Me?0===Me.length?Object(i.jsx)("span",{}):Object(i.jsx)(k.a,{title:"Undo (Ctrl + Z)","aria-label":"undo",children:Object(i.jsx)(w.a,{color:"inherit",onClick:function(){rt()},children:Object(i.jsx)(Be.a,{})})}):Object(i.jsx)("span",{}),e.onlineMode?_?Object(i.jsx)(k.a,{title:"Save to server","aria-label":"submit-to-server",children:Object(i.jsx)(w.a,{color:"inherit",onClick:ct,children:Object(i.jsx)(Pe.a,{})})}):Object(i.jsx)("span",{}):Object(i.jsx)(k.a,{title:"Turn to online","aria-label":"turn-online-on",children:Object(i.jsx)(w.a,{color:"inherit",onClick:function(){e.callback.onTurnOnlineRequested()},children:Object(i.jsx)(Xe.a,{})})}),function(){if(o){var e=function(){T(null)},t=function(){e(),ot()};return Object(i.jsxs)("span",{children:[Object(i.jsxs)(Y.a,{id:"simple-menu",anchorEl:F,keepMounted:!0,open:Boolean(F),onClose:e,children:[Object(i.jsx)(P.a,{onClick:function(){e(),H.current&&H.current.click()},children:"Import"}),Le.current&&0!==Le.current.length?Object(i.jsx)(P.a,{onClick:t,children:"Export"}):Object(i.jsx)(P.a,{disabled:!0,onClick:t,children:"Export"})]}),Object(i.jsx)(k.a,{title:"Export region data","aria-label":"export-regions",children:Object(i.jsx)(w.a,{color:"inherit",onClick:function(e){T(e.currentTarget)},children:Object(i.jsx)(Je.a,{})})}),Object(i.jsx)("input",{ref:H,type:"file",name:"files[]",id:"file",accept:"application/json",onChange:function(e){if(e.preventDefault(),we){var t=e.target.files;if(t){var n=t[0],i=new FileReader;i.onload=function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.result;if(n){if("string"===typeof n){var i=Q(JSON.parse(n).regions);Re(i)}H.current&&(H.current.value="")}},i.readAsText(n)}}},hidden:!0})]})}}()]})]})}),Object(i.jsx)(J.a,{open:ze,onClose:function(){He(Object(b.a)(Object(b.a)({},Fe),{},{open:!1}))},message:Ie,autoHideDuration:2e3,anchorOrigin:{vertical:Ke,horizontal:Ye}},Ke+Ye),Object(i.jsxs)(G.a,{container:!0,spacing:0,className:t.grid,children:[Object(i.jsx)(G.a,{item:!0,xs:8,className:t.regionEditor,children:Object(i.jsx)(ye,{file:o,selectedCategory:R,regionList:we,selectedRegion:me,callback:$e})}),Object(i.jsx)(G.a,{item:!0,xs:4,className:t.regionList,children:Object(i.jsx)(Z.a,{children:Object(i.jsx)(Te,{regionList:we,selectedRegion:me,categoryList:ie,selectedCategory:R,labelList:ge,callback:Qe,categorySettingCallback:et})})})]}),function(){var t=function(){e.onlineMode?ct():ot(),Re([]),W(!1),s(e.selectedFile),L(se)},n=function(){Re([]),W(!1),s(e.selectedFile),L(se)};return Object(i.jsxs)(p.a,{open:I,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(i.jsx)(m.a,{id:"alert-dialog-title",children:"Save changes?"}),Object(i.jsx)(v.a,{children:Object(i.jsx)(O.a,{id:"alert-dialog-description",children:"Do you want to save changes before opening an other file?"})}),(e.onlineMode,Object(i.jsxs)(x.a,{children:[Object(i.jsx)(y.a,{onClick:n,color:"primary",children:"Discard"}),Object(i.jsx)(y.a,{onClick:t,color:"primary",autoFocus:!0,children:"Save"})]}))]})}()]})}var Qe=n(174),et=n(87),tt=n.n(et),nt=n.p+"static/media/add_photo_alternate-black-48dp.3723a89d.svg",it=Object(_.a)((function(e){return Object(E.a)({root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{flexWrap:"nowrap",transform:"translateZ(0)"},imageBoxContainerSelected:{border:"1px solid #0000ff !important;"},imageBoxContainer:{width:"200px",height:"100%",minWidth:"150px",margin:"8px",border:"1px solid #cccccc",position:"relative"},imageContainer:{width:"100%",height:"100%",display:"flex",alignItems:"center",position:"absolute"},image:{objectFit:"cover",width:"100%",height:"auto",marginLeft:"auto",marginRight:"auto"},imagePlaceholder:{marginLeft:"auto",marginRight:"auto"},boxFile:{display:"none"},tapContainer:{width:"100%",height:"100%",position:"absolute",display:"flex",justifyContent:"flex-end",alignItems:"start"},selectionBox:{width:"100%",height:"100%",position:"absolute"},clearIcon:{}})}));function rt(e){var t=it(),n=Object(r.useState)(Array()),a=Object(f.a)(n,2),c=a[0],o=a[1],s=Object(r.useState)(Array()),l=Object(f.a)(s,2),u=l[0],h=l[1],d=Object(r.useRef)(null);var g=function(e){if(u){var t=new FileReader;t.onload=function(t){var n,i=null===(n=t.target)||void 0===n?void 0:n.result;i&&(u[e]=i,h(Object(K.a)(u)))},t.readAsDataURL(c[e])}};return Object(i.jsx)("div",{className:t.root,children:Object(i.jsxs)(Qe.a,{className:t.gridList,children:[Object(i.jsx)(R.a,{className:t.imageBoxContainer,children:Object(i.jsx)(R.a,{className:t.imageContainer,onClick:function(){var e=d.current;e&&e.click()},children:Object(i.jsx)("img",{className:t.imagePlaceholder,src:nt,alt:"add_image"})})}),function(t,n){if(u)return u.map((function(r,a){var s=c[a];return"string"===typeof r?function(e,t,n,r,a,c){return Object(i.jsxs)(R.a,{className:r?n.imageBoxContainerSelected+" "+n.imageBoxContainer:n.imageBoxContainer,children:[Object(i.jsx)(Z.a,{className:n.imageContainer,children:Object(i.jsx)("img",{className:n.image,src:e,alt:t})}),Object(i.jsxs)(R.a,{className:n.tapContainer,children:[Object(i.jsx)(R.a,{className:n.selectionBox,onClick:a}),Object(i.jsx)(w.a,{className:n.clearIcon,color:"inherit",onClick:c,children:Object(i.jsx)(tt.a,{})})]})]})}(r,s.name,t,s===e.selectedFile,(function(e){e.preventDefault(),n.onFileSelected(s)}),(function(t){t.preventDefault();var n=c.indexOf(s);-1!==n&&(c.splice(n,1),u.splice(n,1),o(Object(K.a)(c)),h(Object(K.a)(u)),e.callback.onFileListUpdated(c))})):r}))}(t,e.callback),Object(i.jsx)("input",{ref:d,className:t.boxFile,type:"file",name:"files[]",id:"file",accept:"image/*",multiple:!0,onChange:function(t){t.preventDefault();var n=t.target.files;c.unshift.apply(c,Object(K.a)(n)),c.forEach((function(e,t){g(t)})),o(Object(K.a)(c)),e.callback.onFileListUpdated(c)}})]})})}var at="agreement",ct="20201006",ot=210,st=Object(_.a)((function(e){return Object(E.a)({root:{display:"block",height:"100vh"},main:{height:"calc(100% - ".concat(64,"px)"),width:"100%"},drawerHeader:Object(b.a)(Object(b.a)({display:"flex",alignItems:"center",padding:e.spacing(1,1),justifyContent:"flex-end",position:"fixed"},e.mixins.toolbar),{},{top:"auto",bottom:"0px",width:"100%",backgroundColor:e.palette.background.paper}),grow:{flexGrow:1,textAlign:"center"},drawerHeaderShift:{marginBottom:"calc(".concat(ot,"px)"),transition:e.transitions.create(["margin","height"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},drawer:{},drawerPaper:{height:ot},drawerHeaderPaper:{paddingLeft:"16dp"},content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginBottom:-210},contentShift:{transition:e.transitions.create(["margin","height"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginBottom:"calc(".concat(ot,"px)")}})}));var lt=function(){var e=Object(r.useState)(!0),t=Object(f.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!0),s=Object(f.a)(c,2),b=s[0],_=s[1],E=Object(r.useState)(),N=Object(f.a)(E,2),I=N[0],U=N[1],F=Object(r.useState)(),H=Object(f.a)(F,2),K=H[0],P=H[1],Y=localStorage.getItem(at),X=Object(r.useState)(!Y||!(Y===ct)),z=Object(f.a)(X,2),J=z[0],G=z[1],Z=Object(r.useRef)(null),q=st(),V=function(){if(K&&I){var e=I.indexOf(K);if(!(e<0)){var t=e-1;t>=0&&P(I[t])}}},$=function(){if(K&&I){var e=I.indexOf(K);if(!(e<0)){var t=e+1;t<I.length&&P(I[t])}}},Q=new(function(){function e(){Object(d.a)(this,e)}return Object(g.a)(e,[{key:"onFileListUpdated",value:function(e){U(e),K&&-1===e.indexOf(K)&&P(null)}},{key:"onFileSelected",value:function(e){P(e)}}]),e}()),ee=new(function(){function e(){Object(d.a)(this,e)}return Object(g.a)(e,[{key:"onTurnOnlineRequested",value:function(){G(!0)}}]),e}()),te=function(){_(!b)},ne=function(){var e=Object(h.a)(l.a.mark((function e(t){var n,i,r,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={},i=Object(u.a)(t),e.prev=2,i.s();case 4:if((r=i.n()).done){e.next=12;break}return a=r.value,e.next=8,re(a);case 8:c=e.sent,n[a.name]={image_ids:c,url:ue(c,null,!0)};case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),i.e(e.t0);case 17:return e.prev=17,i.f(),e.finish(17);case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(h.a)(l.a.mark((function e(){var t,n,i,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ne(I);case 4:t=e.sent,n=new Blob([JSON.stringify(t,null,"  ")],{type:"application/json"}),i=URL.createObjectURL(n),r=document.createElement("a"),document.body.appendChild(r),r.download="export.json",r.href=i,r.click(),r.remove(),URL.revokeObjectURL(i);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.jsxs)("div",{className:"App",ref:Z,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),te())},tabIndex:-1,children:[Object(i.jsx)(L.a,{}),Object(i.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"}),Object(i.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),Object(i.jsxs)("div",{className:q.root,children:[Object(i.jsx)(C.a,{className:q.drawer,variant:"persistent",anchor:"bottom",open:b,classes:{paper:q.drawerPaper},children:Object(i.jsx)(rt,{selectedFile:K,callback:Q})}),Object(i.jsx)("main",{className:q.main,children:Object(i.jsx)($e,{selectedFile:K,onlineMode:n,callback:ee,className:Object(j.a)(q.content,Object(o.a)({},q.contentShift,b))})})]}),Object(i.jsxs)(S.a,{elevation:1,className:Object(j.a)(q.drawerHeaderPaper,q.drawerHeader,Object(o.a)({},q.drawerHeaderShift,b)),children:[Object(i.jsx)(k.a,{title:b?"Close (Space)":"Open (Space)","aria-label":"toggle-drawer",children:Object(i.jsx)(w.a,{onClick:te,color:"inherit","aria-label":"open drawer",children:b?Object(i.jsx)(W.a,{}):Object(i.jsx)(D.a,{})})}),Object(i.jsx)("div",{className:q.grow,children:Object(i.jsx)(M.a,{variant:"caption",children:"Copyright 2020 Keiji ARIYAMA (C-LIS CO., LTD.)"})}),I&&0!==I.length?Object(i.jsxs)(R.a,{children:[Object(i.jsx)(k.a,{title:"Prev file","aria-label":"prev-file",children:Object(i.jsx)(w.a,{color:"inherit",onClick:V,children:Object(i.jsx)(T.a,{})})}),Object(i.jsx)(k.a,{title:"Next file","aria-label":"next-file",children:Object(i.jsx)(w.a,{color:"inherit",onClick:$,children:Object(i.jsx)(A.a,{})})}),n?Object(i.jsx)(k.a,{title:"Export all image-IDs","aria-label":"export-image-ids",children:Object(i.jsx)(w.a,{color:"inherit",onClick:ie,children:Object(i.jsx)(B.a,{})})}):Object(i.jsx)("span",{})]}):Object(i.jsx)(R.a,{})]}),Object(i.jsxs)(p.a,{open:J,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(i.jsx)(m.a,{id:"alert-dialog-title",children:"Online mode(Agreement)"}),Object(i.jsx)(v.a,{children:Object(i.jsxs)(O.a,{id:"alert-dialog-description",children:['In online mode, image files will be uploaded to our server for generate image-ids by "imagehash" algorithm. And image files will be stored for improving our services.',Object(i.jsx)("br",{}),"ROI(Region of Interest) data and image-ids will be uploaded, stored, and redistribute for all users.",Object(i.jsx)("br",{}),Object(i.jsx)("br",{}),"We ",Object(i.jsx)("strong",{children:"DO NOT"})," redistribute your image files."]})}),Object(i.jsxs)(x.a,{children:[Object(i.jsx)(y.a,{onClick:function(){a(!1),G(!1)},color:"primary",children:"Decline (Continue offline)"}),Object(i.jsx)(y.a,{onClick:function(){a(!0),localStorage.setItem(at,ct),G(!1)},color:"primary",children:"Agree"})]})]})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(i.jsx)(r.StrictMode,{children:Object(i.jsx)(lt,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[122,1,2]]]);
//# sourceMappingURL=main.02aaea6c.chunk.js.map